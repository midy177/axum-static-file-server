import{o as e,N as m,I as h,R as v,n as p,aD as w,T as c,P as _,aB as T,G as P}from"./vendor-base-cc18fcff.js";import{a7 as f,z as y,p as N,i as C,A as R,O as j,a8 as S}from"./shared-4873712f.js";import{c as z}from"./vendor-c76f9059.js";import"./style-pages-42a62cad.js";import{p as E}from"./index-6524c7ed.js";const M=f.reduce((t,l,s)=>{const n=s%2;return t[n]=t[n]||[],t[n].push(l),t},[]),D=({value:t})=>{const{getIntlText:l}=y();return e.jsx(m,{direction:"vertical",size:"xss",children:M.map(s=>e.jsx(m,{size:"lg",children:s.map(n=>{const a=t==null?void 0:t.includes(n.value);return e.jsxs("span",{className:z("ms-product-release-status-icon",{active:a}),children:[e.jsx(h,{type:a?"icon-check-f":"icon-remove-circle-f"}),l(n.labelIntlKey)]},n.key)})},s.join(",")))})},A=v.memo(({src:t,title:l})=>{const s=p.useMemo(()=>e.jsx("div",{className:"ms-product-image-wrapper",children:e.jsx("img",{className:"ms-product-image",src:t,alt:l})}),[t,l]);return e.jsx(w,{overlayClassName:"ms-product-image-popover",placement:"rightTop",mouseEnterDelay:.3,title:l&&e.jsx(c,{type:"ellipsisTooltip",title:l,children:l}),content:s,getPopupContainer:n=>n.parentElement||document.body,children:s})}),B=({data:t,onSuccess:l,...s})=>{const{getIntlText:n}=y(),[a,g]=p.useState([]),[o,i]=p.useState(!1),r=(t==null?void 0:t.regions)||[],x=p.useMemo(()=>{const d=[];return f.forEach(u=>{var b;const k=(b=t==null?void 0:t.regions)==null?void 0:b.includes(u.value);d.push({label:n(u.labelIntlKey),value:u.value,disabled:k})}),d},[t==null?void 0:t.regions,n]),I=async()=>{i(!0);const[d,u]=await N(E.publishProduct({productId:t.id,regions:[...new Set(a)]}));i(!1),!(d||!C(u))&&l&&l(t)};return e.jsxs(_,{size:"small",className:"ms-product-publish-modal",closable:!1,title:e.jsxs(e.Fragment,{children:[e.jsx(h,{type:"icon-info-f"}),n("mg.product.list.modal_title_product_push")]}),okText:n("common.button.confirm"),okButtonProps:{loading:o,disabled:o||a.every(d=>r.includes(d))},cancelButtonProps:{disabled:o},onOk:I,...s,children:[e.jsx(T.Text,{type:"secondary",children:n("mg.product.list.modal_desc_product_push")}),e.jsx("div",{className:"ms-product-publish-region-list",children:e.jsx(P.Group,{options:x,disabled:o,defaultValue:r,onChange:g})})]})},G=B,K=({filteredInfo:t,onButtonClick:l})=>{const{getIntlText:s}=y(),{getSysTimeFormat:n}=R(),a=p.useMemo(()=>j.map(o=>({text:s(o.labelIntlKey),value:o.value})),[s]);return p.useMemo(()=>[{title:s("mg.product.list.table_title_release_status"),dataIndex:"regions",key:"regions",width:165,render(o=[]){return e.jsx(D,{value:o})}},{title:s("common.label.image"),dataIndex:"photoUrl",key:"photoUrl",width:80,render(o,i){return o?e.jsx(A,{src:o,title:i.model}):e.jsx("div",{className:"empty-image-placeholder"})}},{title:s("common.label.product"),dataIndex:"showName",key:"showName",width:250,render(o,i){return e.jsxs(m,{direction:"vertical",size:"xss",children:[e.jsx(c,{title:o,type:"ellipsisTooltip",children:o}),e.jsx(T.Text,{type:"tertiary",children:e.jsx(c,{title:i.model,type:"ellipsisTooltip",children:i.model})})]})}},{title:s("common.label.type"),dataIndex:"deviceType",key:"deviceType",width:200,ellipsis:!0,filters:a,filterSearch:!0,filteredValue:t.deviceType||null,render(o){const i=j.find(x=>x.value===o),r=i?s(i.labelIntlKey):o;return e.jsx(c,{title:r,type:"ellipsisTooltip",children:r})}},{title:s("mg.product.info.prop_identification"),dataIndex:"snIdentification",key:"snIdentification",filterSearchType:"search",filteredValue:t.snIdentification||null,width:150},{title:s("mg.product.info.prop_sn_length"),dataIndex:"snLength",key:"snLength",width:95},{title:s("mg.product.info.prop_additional_bits"),dataIndex:"snAdditionalBits",key:"snAdditionalBits",width:125},{title:s("common.label.device"),dataIndex:"deviceCount",key:"deviceCount",width:100,render(o){const i=S(o);return e.jsx(c,{type:"ellipsisTooltip",title:i,children:i})}},{title:s("common.label.create_time"),dataIndex:"createTime",key:"createTime",width:145,ellipsis:!0,sorter:!0,render(o){const i=n(o);return e.jsx(c,{type:"ellipsisTooltip",title:i,children:i})}},{title:s("common.label.operation"),key:"$operation",fixed:"right",width:90,render(o,i){return e.jsxs(m,{size:"sm",children:[e.jsx("span",{className:"ms-table-pro-oprt-btn",onClick:()=>l("detail",i),onDoubleClick:r=>r.stopPropagation(),children:e.jsx(c,{title:s("common.label.detail"),mouseEnterDelay:.3,children:e.jsx(h,{type:"icon-view-list",colorType:"action"})})}),e.jsx("span",{className:"ms-table-pro-oprt-btn",onClick:()=>l("publish",i),onDoubleClick:r=>r.stopPropagation(),children:e.jsx(c,{title:s("common.label.publish"),mouseEnterDelay:.3,children:e.jsx(h,{type:"icon-release",colorType:"action"})})})]})}}],[t,a,s,n,l])},U=K;export{G as P,U as u};
